{
	"inherit": "vshaxe-node",
	"mainTarget": "all",
	"haxelibs": [
		{
			"name": "vscode",
			"installArgs": ["install", "vscode"]
		},
		{
			"name": "vscode-json-rpc",
			"installArgs": ["git", "vscode-json-rpc", "https://github.com/vshaxe/vscode-json-rpc"]
		},
		{
			"name": "formatter",
			"installArgs": ["git", "formatter", "https://github.com/HaxeCheckstyle/haxe-formatter"]
		},
		{
			"name": "json2object",
			"installArgs": ["install", "json2object"]
		}
	],
	"targets": [
		{
			"name": "all",
			"composite": true,
			"targetDependencies": [
				"test",
				"formatter-schema",
				"tm-language"
			]
		},
		{
			"name": "test",
			"composite": true,
			"targetDependencies": [
				"vshaxe",
				"language-server-tests"
			],
			"args": {
				"debug": true
			}
		},
		{
			"name": "vshaxe",
			"composite": true,
			"targetDependencies": [
				"client",
				"language-server",
				"eval-debugger"
			]
		},
		{
			"name": "client",
			"installCommands": [
				["npm", "install"]
			],
			"afterBuildCommands": [
				["npx", "webpack", "--mode", "production", "--silent"]
			],
			"args": {
				"haxelibs": ["vscode", "vscode-json-rpc"],
				"classPaths": [
					"server/src",
					"server/protocol/src",
					"src",
					"src-api"
				],
				"defines": [
					"JSTACK_MAIN=vshaxe.Main.main",
					"JSTACK_ASYNC_ENTRY",
					"JSTACK_NO_SHUTDOWN"
				],
				"macros": [
					"nullSafety('vshaxe')"
				],
				"output": {
					"target": "js",
					"path": "bin/client.js"
				},
				"packageName": "vshaxe.Main"
			}
		},
		{
			"name": "formatter-schema",
			"inherit": "empty",
			"args": {
				"haxelibs": ["formatter", "json2object"],
				"classPaths": ["schemas"],
				"main": "SchemaGenerator",
				"output": {
					"target": "interp"
				},
				"debug": true
			}
		}
	]
}